I will fix the `AttributeError: 'coroutine' object has no attribute 'content'` by correctly handling the asynchronous nature of AgentScope's `AgentBase` and `OpenAIChatModel`.

The issue is that `self.agent_a(last_msg)` returns a coroutine (because `AgentBase.__call__` is `async`), but the synchronous code in `src/engine.py` tries to access its result directly.

My plan is to:

1. **Refactor** **`src/agentscope_adapter.py`**:

   * Change `DatingAgent.reply` to be an `async def` method.

   * Use `await self.model(...)` inside `reply` instead of the hacky `loop.run_until_complete`. This makes the agent purely asynchronous.
2. **Refactor** **`src/engine.py`**:

   * Make `run_turn` an `async def` method so it can `await` the agents.

   * Add a synchronous wrapper `run_turn_sync` that uses `asyncio.run()` to execute the async `run_turn`. This allows the synchronous Streamlit app to call it easily.

   * Update the logic inside `run_turn` to `await self.agent_a(...)` and `await self.agent_b(...)`.

This ensures that the entire call chain from the engine down to the model is properly awaited, resolving the coroutine error.

Plan:

1. Update `src/agentscope_adapter.py`: Make `reply` async and use `await`.
2. Update `src/engine.py`: Make `run_turn` async and add `run_turn_sync`.
3. Update `app.py`: Call `session.run_turn_sync(turn)` instead of `session.run_turn(turn)`.

